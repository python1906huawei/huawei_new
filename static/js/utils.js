/*! utils-pc | Date:2019-07-31 10:33:41 */
!function(t){function e(n){if(o[n])return o[n].exports;var i=o[n]={exports:{},id:n,loaded:!1};return t[n].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var o={};return e.m=t,e.c=o,e.p="./js/",e(0)}([function(t,e,o){o(8),o(2),o(1),o(9),o(7),o(5),o(4),o(6),o(3)},function(t,e){!function(t){t.ams||(t.ams={}),ams.commonNewPrize=function(t,e){utils.ajaxOpenAPI({type:"POST",url:"/ams/prize/commonPrize",data:t,success:function(t){e&&e(t)}})}}(window)},function(t,e){!function(t,e,n){var e,i,a,s=t.locale.utilsBox,c=!0,l={boxid:"ol_box",boxclass:"ol_box",type:"dialog",title:"",faceType:"",iconType:"",width:0,height:0,showTitle:!0,showButton:!0,showCancel:!0,showOk:!0,cancelBtnName:s.cancelBtnName,okBtnName:s.okBtnName,timeout:0,draggable:!1,modal:!0,zIndex:9999,remember:!1,position:"center",clickOut:null,onclose:null,onopen:null,oncancel:null,onok:null,blur:null,focus:null,autoHeight:!0,autoPosition:!0,cache:!1},r=function(){return"CSS1Compat"==document.compatMode?document.documentElement:document.body},p=function(){var t=r();return{width:Math.max(t.scrollWidth,t.clientWidth||0)-1,height:Math.max(t.scrollHeight,t.clientHeight||0)-1}},d={};d.dialog={html:'<div><div class="box-ct">   <div class="box-header">       <div class="box-tl"></div>       <div class="box-tc">           <div class="box-tc1"></div>           <div class="box-tc2"><a href="javascript:;" onclick="return false;" title="关闭" class="box-close"></a><span class="box-title"></span></div>       </div>       <div class="box-tr"></div>   </div>   <table width="100%" border="0" cellspacing="0" cellpadding="0" style="table-layout:fixed;">       <tr>           <td class="box-cl"></td>           <td class="box-cc">               <div class="box-content"></div>               <div class="box-button">                   <a class="box-cancel" href="javascript:;"><span>取消</span></a>                   <a class="box-ok" href="javascript:;"><span>确定</span></a>               </div>           </td>           <td class="box-cr"></td>       </tr>   </table>   <div class="box-bottom">       <div class="box-bl"></div>       <div class="box-bc"></div>       <div class="box-br"></div>   </div></div></div>',initContent:function(t){t.setContent(t.content)},setContent:function(t,e,o){t.content=e||t.content,t.setContent(t.content),"function"==typeof o&&o()}},d.ajax={initContent:function(t){},setContent:function(t,o,n){t._b_button.hide(),t.setContent('<div class="box-loading"></div>'),t._b_content.height()<90&&t._b_content.height(Math.max(90,t.options.height)),t._box.width()<200&&t._box.width(Math.max(200,t.options.width));var i=o||t.content;return"string"!=typeof i?void alert("please set ajax url."):(t.content=i,t.options.cache===!1&&(i+=i.indexOf("?")==-1?"?_t="+(new Date).getTime():"&_t="+(new Date).getTime()),void e.get(i,function(e){t.options.showButton&&t._b_button.show(),t.setContent(e),"function"==typeof n&&n()}))}},d.iframe={initContent:function(t){},setContent:function(t,e,o){var n=e||t.content;if("string"!=typeof n)return void alert("please set iframe url.");t.content=n;var i="box-iframe-"+(new Date).getTime();t.setContent('<iframe class="boxIframe" width="100%" height="100%" frameborder="0" name="'+i+'"></iframe><script>window["'+i+'"].location.href="'+n+'";</script>'),"function"==typeof o&&o()},closeEvent:function(t){t.options.remember||t.find("iframe").each(function(){this.contentWindow.close(),jQuery(this).remove()})}},utils.box=function(o,n){this.options=null,this._type=null,this._mask=null,this._events={},this._box=null,this._b_content=null,this._b_button=null,this.content=o,this._initedContent=!1,this._onbox=!1,this._isOpen=!1,e=jQuery,i=e(t),a=e(document),c=!1,this.options=e.extend({},l,n),this.init()},utils.box.prototype={init:function(){this.initConfig(),this.options.modal&&this.initMask(),this.initBox(),this.initEvent()},initBox:function(){e("#"+this.options.boxid).remove(),this._box=e(this._type.html).css({visibility:"hidden",position:"absolute",top:0,left:0,zIndex:this.options.zIndex}),this._b_button=this._box.find(".box-button"),this._b_content=this._box.find(".box-content"),this.renderBox(this.options),this._box.appendTo("body"),this._type.initContent(this)},initConfig:function(){switch(this.options.type){case"ajax":this._type=d.ajax;break;case"iframe":this._type=d.iframe;break;default:this._type=d.dialog}this._type=e.extend({},d.dialog,this._type)},initEvent:function(){var e=this;this.options.draggable&&this.options.showTitle?this._box.find(".box-header").mousedown(function(n){var i=this;o=document,ox=parseInt(e._box.css("left"),10),oy=parseInt(e._box.css("top"),10),mx=n.clientX,my=n.clientY,size=p(),box_w=e._box.outerWidth(!0),box_h=e._box.outerHeight(!0),i.setCapture&&i.setCapture();var s=function(o){t.getSelection?t.getSelection().removeAllRanges():document.selection.empty();var n=Math.max(ox+o.clientX-mx,0),i=Math.max(oy+o.clientY-my,0);n=Math.min(n,size.width-box_w),i=Math.min(i,size.height-box_h),e._box.css({left:n,top:i})},c=function(){i.releaseCapture&&i.releaseCapture(),a.off("mousemove",s),a.off("mouseup",c)};a.mousemove(s).mouseup(c)}):this._box.find(".box-header").css("cursor","default")},renderBox:function(t){var e={zIndex:t.zIndex,position:"absolute"};t.boxid&&this._box.attr("id",t.boxid),t.boxclass&&this._box.attr("class",t.boxclass),t.showTitle?""==t.title||this.setTitle(t.title):this._box.find(".box-title").hide(),t.showButton?(t.showCancel||this._b_button.find(".box-cancel").hide(),t.showOk||this._b_button.find(".box-ok").hide()):this._b_button.hide(),this._b_button.find(".box-ok span").html(t.okBtnName),this._b_button.find(".box-cancel span").html(t.cancelBtnName),this._box.css(e)},setTitle:function(t){return this._box.find(".box-title").html(t),this},setContent:function(o){var n="";if("undefined"!=typeof o&&null!=o){this._initedContent=!0,this.options.faceType&&(n+='<div class="face '+this.options.faceType+'"></div>'),this.options.iconType&&(n+='<i class="'+this.options.iconType+'"></i>'),this._b_content.empty().html(n+o);var i=this;if(this.options.width>0?this._box.css("width",this.options.width):this._box.css("width",null),this.options.height>0){var a={height:this.options.height};this.options.autoHeight||(a["overflow-y"]="auto"),this._b_content.css(a)}else this._b_content.css("height","auto");this.setPosition(),this._box.find(".box-close, .box-cancel, .box-ok").off("click").on("click",function(){i.close()}),"function"==typeof this.options.onok&&this._box.find(".box-ok").off("click").on("click",function(){i.options.onok.call(this,i)}),"function"==typeof this.options.oncancel&&this._box.find(".box-cancel").off("click").on("click",function(){i.options.oncancel.call(this,i)}),this._box.find(".box-close, .box-cancel, .box-ok").off("keypress").on("keypress",function(o){o=o||t.event;var n=o.which||o.charCode||o.keyCode;switch(n){case 27:return i.close(),!1;case 32:case 13:return e(document.activeElement).trigger("click"),!1}})}},openEvent:function(){if(!this._isOpen){var t=this;if(this.options.autoPosition){if("center"!=this.options.position){var o;this._events.scroll=function(){clearTimeout(o),o=setTimeout(function(){t.setPosition()},300)},i.on("scroll",this._events.scroll)}this._events.resize=function(){t.setPosition()},i.on("resize",this._events.resize)}this.options.timeout>0&&(this._events.timeout=setTimeout(function(){t.close()},this.options.timeout)),this._onbox=!0,this.options.clickOut&&(this._events.box_click=function(e){t._onbox=!0},this._events.document_click=function(e){return 0!=e.button||(t._onbox===!1&&t.options.clickOut(t),void(t._onbox=!1))},this._box.bind("click",this._events.box_click),a.bind("click",this._events.document_click)),this.options.modal&&this.showMask(),this.options.onopen&&this.options.onopen(this),this.options.focus&&e(this.options.focus).focus(),this._isOpen=!0}},closeEvent:function(){clearTimeout(this._events.timeout),this._events.scroll&&i.off("scroll",this._events.scroll),this._events.resize&&i.off("resize",this._events.resize),this._events.box_click&&this._box.off("click",this._events.box_click),this._events.document_click&&a.off("click",this._events.document_click),this.options.modal&&this.hideMask(),this.options.onclose&&this.options.onclose(this),this.options.blur&&e(this.options.blur).focus(),this._isOpen=!1,this._type.closeEvent&&this._type.closeEvent(this)},setPosition:function(){if("center"==this.options.position){var t=i.height(),o=i.width(),n=this._box.outerWidth(),a=this._box.outerHeight(),s={x:(o-n)/2,y:(t-a)/2},l={position:"fixed"};if(s.x<0&&(l.width=o,s.x=0),s.y<0&&(l.height=t,s.y=0),l.top=s.y,l.left=s.x,c){l.position="absolute";var r=e("html");r.css("background-image")&&"none"!=r.css("background-image")||r.css("background-image","url(about:blank)"),this._box[0].style.setExpression("left","(document.documentElement || document.body).scrollLeft+"+l.left+'+"px"'),this._box[0].style.setExpression("top","(document.documentElement || document.body).scrollTop+"+l.top+'+"px"'),delete l.top,delete l.left}return void this._box.css(l)}if("[object Object]"===Object.prototype.toString.call(this.options.position)){var p=this.options.position.top||0,d=this.options.position.left||0;if(this.options.position.ref){var h=e(this.options.position.ref),s=h.offset();p+=s.top,p+=h.outerHeight(!0),d+=s.left}this._box.css({top:p,left:d})}},renderContent:function(t,e){"undefined"!=typeof t&&null!=t&&(this._initedContent=!1),this._initedContent&&this.options.remember?(this.setPosition(),this.openEvent()):this._type.setContent(this,t,e)},open:function(t,o){this._isOpen&&this.closeEvent(),this.options=e.extend({},this.options,o);var n=this;return this.renderContent(t,function(){n.openEvent()}),this._box.stop().css({visibility:"visible",opacity:null}),this},close:function(){this.closeEvent(),this._box.css("visibility","hidden")},isOpen:function(){return this._isOpen},fadeIn:function(t,o,n){this.options=e.extend({},this.options,o),this.renderContent(t);var i=this._box.css("opacity")||1;this._box.css({opacity:0,visibility:"visible"}).stop().animate({opacity:i},n),this.openEvent()},fadeOut:function(t){var e=this;this.closeEvent(),this._box.stop().animate({opacity:0},t,function(){e._box.css({visibility:"hidden",opacity:null})})},find:function(t){return this._b_content.find(t)},getBox:function(){return this._box},initMask:function(){e(".ol_box_mask")&&e(".ol_box_mask").remove(),this._mask=e("<div class='ol_box_mask'></div>").css({visibility:"hidden",width:0,height:0,zIndex:this.options.zIndex}).appendTo("body");var t=this;this._events.masker_resize=function(){t._mask.css(p())}},showMask:function(){var t=p();t.visibility="visible",this._mask.css(t),i.on("resize",this._events.masker_resize)},hideMask:function(){this._mask.css({visibility:"hidden",width:0,height:0}),i.off("resize",this._events.masker_resize)}}}(window,jQuery)},function(t,e){window.DC||(window.DC={}),DC.namespace=function(){for(var t,e,o,n,i=arguments,a=0;a<i.length;a++)if(t=this,n=i[a],n.indexOf(".")>-1)for(o=n.split("."),e="DC"==o[0]?1:0;e<o.length;e++)t[o[e]]=t[o[e]]||{},t=t[o[e]];else t[n]=t[n]||{},t=t[n];return t},DC.namespace("modules"),DC.defineModule=function(t,e){var o,n=DC.modules,i=function(t){return"[object Function]"===Object.prototype.toString.call(t)};if(t&&e&&!n[t]){o=i(e)?e():e;try{o&&o.init&&(n[t]=o)}catch(t){}}}},function(t,e){!function(t,e,o){function n(o,n,i){var s="/ams/coupon/receive",c={myLoginUrl:"",bindPhoneUrl:main+"/member/bind/phone/redirect?back_url="+encodeURIComponent(t.location.href),confirmUrl:main+"/authmember/accesstoken"};utils.ajaxOpenAPI({type:"POST",url:s,data:{activityCode:o,batchCode:n,t:(new Date).getTime()},success:function(t){if(t.success)l(t.pcReviceSuccTip,0),utils.queryCouponState([{activityCode:o,batchCode:n}],function(t){var o="";t.receiveStates==-1?o="state-empty-"+i:1==t.receiveStates?(o="state-general-"+i,e('li[data-acbc="'+t.activityCode+t.batchCode+'"]').find("a").attr("class","getCoupon")):2==t.receiveStates?o="state-got-"+i:3==t.receiveStates?o="state-begin-"+i:4==t.receiveStates&&(o="state-over-"+i),e('li[data-acbc="'+t.activityCode+t.batchCode+'"]').attr("class",o)});else switch(parseInt(t.code)){case 9206:l(t.errorTip,2);break;case 9208:l(t.errorTip,3);break;case 9209:l(t.errorTip,4);break;default:l(t.errorTip,1)}}});var l=function(t,o){var n={0:"",1:"",2:a["btn.login"],3:a["btn.verification"],4:a["btn.authentication"]},i={0:"",1:"",2:"javascript:utils.goLogin()",3:c.bindPhoneUrl,4:c.confirmUrl},s=0;0==o&&(s=-20);var l='<span style="color: #777;position: relative;padding: 3px 0 3px 26px;"><em class="cpem" style="width: 20px;height: 20px;position: absolute;top:2px;left:0px;background-position-y:'+s+'px;"></em>'+t+' <a href="'+i[o]+'">'+n[o]+"</a></span>";e("#couponDiv").children("p").html(l)}}function i(){var t='<div style="display:none;width:100%;height:100%;position:fixed;z-index:99999;top:0;left:0;right:0;bottom:0;background-color:rgba(0,0,0,0.5);"><div id="couponDiv" class="mod-bfcoupons-pc" style="width:698px;border: 1px solid #d6d6d6;position: fixed;background: #fff;z-index:1000;left:50%;margin-left: -350px;"><a class="cpa" href="javascript:;" onclick="$(this).parent().parent().hide();$(\'#couponDiv\').children(\'p\').html(\'\');" style="display:block;position:absolute;width:45px;height:44px;top:0px;right:0px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAOCAYAAADwikbvAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAAsSAAALEgHS3X78AAAA3ElEQVQoz43RPUpEMRSG4ScXLVyClZ0L0LGw0QUoMlpYpRKsxMZ1aOMPCFqeQhDEhbgJQRDchDYpMjFzZ9LlO+d9k5OkiEh4xWXO+dsSKyL2cJrKZgd3OF4kKOA1DlMVTnA/JijgDQ5yzj+pKU7wgGkraEEY6oac8wcu8B4R6xW434Iwc3LvBtgsM86Ac+FK8IjfHggrIw+7Wo211msYemFE7JavO8I53iJio+1LI+A05/xVsm08lW/87MI9sKr9E6RlwHmCVIG3JeyClWALzzhJETHgBVeLwEZw9gd7om1XAmZH9QAAAABJRU5ErkJggg==) center center no-repeat"></a><h2 style="height:60px;line-height:60px;font-size:18px;color:#333;text-align:center;">- '+a.getCoupons+' -</h2><div class="coupon-roll" style="width:660px;max-height:380px;overflow-y:auto;padding-top:20px;margin:0 auto;overflow:auto;border:1px solid #eaeaea;background:#f6f6f6;"><ul style="list-style: none;"></ul></div><p style="height:40px;line-height:40px;text-align:center;"></p></div></div>';e(".J_page").append(t),e("#couponDiv").on("click",".getCoupon",function(){n(e(this).data("ac"),e(this).data("bc"),e(this).data("aid"))})}var a=t.locale.getCoupon,s=t.locale.common;utils.getCouponMulti=function(o,n){function a(t){var o="";t.receiveStates==-1?o="state-empty-"+l:1==t.receiveStates?(o="state-general-"+l,e('li[data-acbc="'+t.activityCode+t.batchCode+'"]').find("a").attr("class","getCoupon")):2==t.receiveStates?o="state-got-"+l:3==t.receiveStates?o="state-begin-"+l:4==t.receiveStates&&(o="state-over-"+l),e('li[data-acbc="'+t.activityCode+t.batchCode+'"]').attr("class",o)}o.preventDefault();var c=e(n),l=c.data("instanceid"),r=c.data("sbomcode"),p="",d=couponList[l+""+r],h=[];0==e("#couponDiv").length&&i(),e("#couponDiv").children("p").html("");for(var u in d){var f=d[u];f.cquota&&(h.push({activityCode:f.activityCode,batchCode:f.batchCode}),p+="cz-CZHW"==t.pageConfig.locale||"ru-RU"==t.pageConfig.locale||"ru-RUHW"==t.pageConfig.locale||"ru-RUHONOR"==t.pageConfig.locale?'<li title="'+f.cname+'" data-acbc="'+f.activityCode+f.batchCode+'" style="float: left;width: 280px;height: 130px;margin: 0 0 20px '+(1==d.length?"190px":"35px")+';border-radius: 10px;box-shadow: 0 7px 15px #e0e0e0;"><a href="javascript:;" data-aid="'+l+'" data-ac="'+f.activityCode+'" data-bc="'+f.batchCode+'" style="width: 100%;height: 100%;display: inline-block;"><div style="float: left;width: 196px;margin-top: 15px;margin-left:30px;"><div style="display:table;color: #e85a53;margin-bottom: 9px;"><span style="font-size: 46px;float: left;font-family: Impact;line-height: 46px;">'+f.cquota+'</span><span style="float: left;color: #e85a53;font-size: 22px;font-weight: bold;text-align: right;padding-right: 6px;width: 30px;margin-top: 15px;">'+s.currencySymbol+'</span><strong style="font-size: 14px;font-weight: bold;margin-left: 12px;float: left;margin-top: 3px;">'+c.data("cquotasuffix")+'</strong></div><p style="color: #3a3a3a;font-size: 14px;padding-right: 26px;margin:0px;line-height: 16px;height: 32px;overflow: hidden;">'+f.cname+'</p><p style="margin-top: 4px;color: #888;">'+f.cdate+"</p></div></a></li>":'<li title="'+f.cname+'" data-acbc="'+f.activityCode+f.batchCode+'" style="float: left;width: 280px;height: 130px;margin: 0 0 20px '+(1==d.length?"190px":"35px")+';border-radius: 10px;box-shadow: 0 7px 15px #e0e0e0;"><a href="javascript:;" data-aid="'+l+'" data-ac="'+f.activityCode+'" data-bc="'+f.batchCode+'" style="width: 100%;height: 100%;display: inline-block;"><span style="float: left;color: #e85a53;font-size: 22px;font-weight: bold;text-align: right;padding-right: 6px;width: 30px;margin-top: 15px;">'+s.currencySymbol+'</span><div style="float: left;width: 196px;margin-top: 15px;"><div style="display:table;color: #e85a53;margin-bottom: 9px;"><span style="font-size: 46px;float: left;font-family: Impact;line-height: 46px;">'+f.cquota+'</span><strong style="font-size: 14px;font-weight: bold;margin-left: 12px;float: left;margin-top: 3px;">'+c.data("cquotasuffix")+'</strong></div><p style="color: #3a3a3a;font-size: 14px;padding-right: 26px;margin:0px;line-height: 16px;height: 32px;overflow: hidden;">'+f.cname+'</p><p style="margin-top: 4px;color: #888;">'+f.cdate+"</p></div></a></li>")}utils.queryCouponState(h,a);var g=e("#couponDiv");g.find("ul").html(p),g.parent().show(),e(t).on("resize",function(o){g.css("top",(e(t).height()-g.outerHeight())/2)}),g.css("top",(e(t).height()-g.outerHeight())/2)}}(window,jQuery)},function(t,e){utils.queryCouponState=function(t,e){if(!t.length)return!1;for(var o=0;o<t.length;o++)for(var n=o+1;n<t.length;)t[o].activityCode==t[n].activityCode&&t[o].batchCode==t[n].batchCode?t.splice(n,1):n++;utils.ajaxOpenAPI({type:"GET",url:"/ams/coupon/queryCouponStates",data:{listQueryCouponStateReqs:JSON.stringify(t)},success:function(t){t.success&&t.couponStateData.length>0&&$.each(t.couponStateData,function(t,o){e(o)})}})},utils.getCoupon=function(t,e,o){var n=window.locale.getCoupon;utils.ajaxOpenAPI({type:"POST",url:"/ams/coupon/receive",cache:!1,data:t,success:function(i){var a="",s={boxclass:"ol_box_4",showTitle:!1,faceType:"success",okBtnName:n["btn.confirm"],showCancel:!1};if(i&&i.success){a=i.pcReviceSuccTip;var c=[];c.push(t),utils.queryCouponState(c,e),o&&void 0!=i.reviceType?"1"==i.reviceType?"zh-CN"==window.pageConfig.locale&&utils.handleCode.toUse(s,t):"zh-CN"==window.pageConfig.locale&&utils.handleCode.checkOut(s,t):"zh-CN"==window.pageConfig.locale&&utils.handleCode.toUse(s,t)}else switch(a=i.errorTip,s.faceType="failed",Number(i.code)){case 9206:utils.handleCode.unLogin(s);break;case 9208:utils.handleCode.unVerification(s);break;case 9209:utils.handleCode.unAuthentication(s);break;case 9216:utils.handleCode.earn(s)}new utils.box(a,s).open()}})}},function(t,e){!function(t,e){var o=t.locale.prize;Md.prize={oPrize:function(t,n){var i=this,a=function(t){var a=null,s=null,c="<i></i>",l="dialog-button-yes",r=o["btn.confirm"];if(t&&t.success&&n&&n(),t&&t.success){if(t.limit>0){var p=utils.getLanguageKey(t.limit,"prompt.chance");a=(t.pcPrizeTip||t.pcNotPrizeTip||"")+o["prompt.have"]+t.limit+o[p]}else a=t.pcPrizeTip||t.pcNotPrizeTip||"";t.pcNotPrizeTip&&(c="<s></s>")}else c="<s></s>",s=i.messageTip(t.code,t.msg,t.isSupportShare,t.isShareTimesUsedUp),a=s.text,r=s.btn,l=s._class;Tool.pcTipShow(c,a,l,r),s&&s.notRedBag&&(e("#redbag-bg").hide(),e("#redbag").html(""),i.timer&&clearInterval(i.timer))};ams.commonNewPrize({activityCode:t},a)},messageTip:function(t,e,n,i,a){var s={text:"",btn:o["btn.confirm"],_class:"dialog-button-yes",notRedBag:!1},c=null;switch(Number(t)){case 9e3:case 9001:case 9002:s.text=o["prompt.wait"];break;case 9003:case 9004:s.text=o["prompt.begin"];break;case 9005:s.text=o["prompt.over"],s.notRedBag=!0;break;case 9006:s.text=o["prompt.login"],s.btn=o["btn.login"],s._class="dialog-button-ver";break;case 9007:s.text=o["prompt.condition"],s.notRedBag=!0;break;case 9008:s.text=o["prompt.phone"],s.btn=o["btn.verification"],s._class="dialog-button-ver";break;case 9009:s.text=o["prompt.authentication"],s.btn=o["btn.authentication"],s._class="dialog-button-ver";break;case 9010:s.text=o["prompt.data"];break;case 9011:c=e.replace(/[^0-9]/g,""),s.text=o["prompt.cumulate"]+c+o["prompt.prize"],s.notRedBag=!0;break;case 9012:c=e.replace(/[^0-9]/g,""),s.text=o["prompt.continue"]+c+o["prompt.prize"],s.notRedBag=!0;break;case 9013:n&&i===!1?(s.text=o["prompt.share"],s.btn=o["btn.share"],s._class="dialog-button-ver"):(s.text=o["prompt.empty"],s.notRedBag=!0);break;case 9014:s.text=o["nonsupport.share"];break;case 9026:s.btn=o["btn.earn"],s.text=o["prompt.earn.point.a"]+a+o["prompt.earn.point.b"];break;case 9027:s.btn=o["btn.earn"],s.text=o["prompt.earn.point.a"]+a+o["prompt.earn.point.b"];break;default:s.text=o["prompt.wait"]}return s}},t.prize=Md.prize}(window,jQuery)},function(t,e){!function(t){var e=t.locale.getCoupon;utils.handleCode={unLogin:function(o){o.faceType="failed",o.showCancel=!0,o.cancelBtnName=t.locale.jumpBtn["btn.register"],o.oncancel=function(){t.location.href=t.registerLink},o.okBtnName=e["btn.login"],o.onok=function(){utils.goLogin()}},unVerification:function(o){o.showCancel=!0,o.okBtnName=e["btn.verification"],o.onok=function(){t.location.href=t.main+"/member/bind/phone/redirect?back_url="+encodeURIComponent(t.location.href)}},unAuthentication:function(o){o.showCancel=!0,o.okBtnName=e["btn.authentication"],o.onok=function(){t.location.href=t.main+"/authmember/accesstoken"}},share:function(t){t.showCancel=!0,t.okBtnName=e["btn.share"],t.onok=function(){Tool.share.shareSina(Tool.share.shareType)}},earn:function(o){o.showCancel=!0,o.okBtnName=e["btn.earn"],o.onok=function(){t.location.href=t.main+"/member/newpoint"}},data:function(o){o.showCancel=!0,o.okBtnName=e["btn.data"],o.onok=function(){t.location.href=t.infoLink}},toUse:function(o,n){o.showCancel=!0,o.cancelBtnName=e["btn.confirm"],o.okBtnName=e["btn.toUse"],o.onok=function(){t.location.href=t.domainMain+"/product/coupon/queryPrdForCoupon-"+n.batchCode}},checkOut:function(o,n){o.showCancel=!0,o.cancelBtnName=e["btn.confirm"],o.okBtnName=e.checkOut,o.onok=function(){t.location.href=t.domainMain+"/member/msg"}}}}(window)},function(t,e){function o(){var t={portal:"1",lang:"zh-CN",country:"CN",agreeFlag:"1",sendSms:"1",sendEmail:"1",sendPushMsg:"1",sendInnerMsg:"1"};utils.ajaxOpenAPI({type:"POST",url:"/mcp/v1/promotion/saveSaleInfo",data:t,success:function(t){t&&"0"==t.code&&t.success&&console.log(t)},errorFunction:function(t){}})}function n(t){if("CN"===window.pageConfig.areaCode){var e={portal:"1",lang:"zh-CN",country:"CN"};if("DESIGN"==window.shopdcmode)return!1;utils.ajaxOpenAPI({type:"GET",url:"/mcp/queryUserInfo",data:e,success:function(e){if(e&&e.success){var o=Tool.cookie.get("hasSigned");"1"!=o&&"function"==typeof t&&t()}}})}}function i(){var t={portal:1,lang:"zh-CN",country:"CN",agrInfo:[{country:"cn",branchId:0,agrType:215},{country:"cn",branchId:0,agrType:10066}],tokenType:2};utils.ajaxOpenAPI({type:"POST",url:"/mcp/agreement/queryAgreementSignLogs",data:t,timeout:1e4,success:function(t){if(t&&"0"==t.code&&t.success){var e=[{country:"cn",branchId:0,agrType:215,isAgree:"true",language:"zh-CN"},{country:"cn",branchId:0,agrType:10066,isAgree:"true",language:"zh-CN"}],n=[{country:"cn",branchId:0,agrType:215,isAgree:"true",language:"zh-CN"}],i=[{country:"cn",branchId:0,agrType:10066,isAgree:"true",language:"zh-CN"}],r="https://consumer.huawei.com/minisite/cloudservice/vmall-web/privacy-statement.htm?country=CN&language=zh_Hans_CN",p="https://consumer.huawei.com/minisite/cloudservice/vmall-web/terms.htm?country=CN&language=zh_Hans_CN",d='<div style="font-size:18px;color: #3a3a3a;">华为商城通知</div><div style="text-align:left;margin-top:10px;height: 76px;font-size: 14px;line-height:19px">欢迎您使用华为商城，为了给您提供更好的服务，本网站在使用时，需要获取网络、帐号及使用信息。我们将对您的个人数据予以充分保护。点击“同意”，表示您同意上述内容及<a href="'+p+'" style="color: #267eff;"  target="_blank">华为商城服务协议</a>、<a href="'+r+'" style="color:#267eff;"  target="_blank">关于华为商城与隐私的声明</a>。</div>';if(opts={boxclass:"ol_box_4 signAgreementLogs",showTitle:!1,showOk:!0,okBtnName:"同意",showCancel:!0,cancelBtnName:"取消"},t.signInfo&&t.signInfo.length>0){var h=t.signInfo;h[0].agree&&h[0].needSign&&h[1].agree&&h[1].needSign?(l.type="3",opts.height=76,d='<div style="font-size:18px;color: #3a3a3a;">变更通知</div><div style="text-align:left;margin-top:10px;font-size: 14px;line-height:19px">为了给您提供更好的服务，我们更新了服务协议和隐私声明。</div><div  style="text-align:left;font-size: 14px;line-height:19px">详情内容请参见最新的<a href=" '+p+'" style="color: #267eff;"  target="_blank">华为商城服务协议</a>、<a href="'+r+'" style="color:#267eff;"  target="_blank">关于华为商城与隐私的声明</a>。</div>',opts.onok=function(){s(),a(e),$(".ol_box_4.signAgreementLogs").hide(),$(".ol_box_mask").hide()},opts.oncancel=function(){c(),window.location.href=domainMain+"/account/logout",$(".ol_box_4.signAgreementLogs").hide(),$(".ol_box_mask").hide()},new utils.box(d,opts).open()):h[0].agree&&h[0].needSign&&10066==h[0].agrType||h[1].agree&&h[1].needSign&&10066==h[1].agrType?(l.type="2",opts.height=56,d='<div style="font-size:18px;color: #3a3a3a;">隐私声明变更通知</div><div style="text-align:left;margin-top:10px;font-size: 14px;line-height:19px">为了给您提供更好的服务，我们更新了隐私声明。</div><div style="text-align:left;font-size: 14px;line-height:19px">详情内容请参见最新的<a href="'+r+'" style="display:inline-block;color: #267eff;"  target="_blank">关于华为商城与隐私的声明</a> 。</div>',opts.onok=function(){s(),a(i),$(".ol_box_4.signAgreementLogs").hide(),$(".ol_box_mask").hide()},opts.oncancel=function(){c(),window.location.href=domainMain+"/account/logout",$(".ol_box_4.signAgreementLogs").hide(),$(".ol_box_mask").hide()},new utils.box(d,opts).open()):(h[0].agree&&h[0].needSign&&215==h[0].agrType||h[1].agree&&h[1].needSign&&215==h[1].agrType)&&(l.type="1",opts.height=56,d='<div style="font-size:18px;color: #3a3a3a;">服务协议变更通知</div><div style="text-align:left;margin-top:10px;font-size: 14px;line-height:19px">为了给您提供更好的服务，我们更新了服务协议。</div><div style="text-align:left;font-size: 14px;line-height:19px">详情内容请参见最新的<a href="'+p+' " style="display:inline-block;color: #267eff;"  target="_blank">华为商城服务协议</a> 。</div>',opts.onok=function(){s(),a(n),$(".ol_box_4.signAgreementLogs").hide(),$(".ol_box_mask").hide()},opts.oncancel=function(){c(),window.location.href=domainMain+"/account/logout",$(".ol_box_4.signAgreementLogs").hide(),$(".ol_box_mask").hide()},new utils.box(d,opts).open()),$(".ol_box_4.signAgreementLogs").find(".box-close").remove()}else t.signInfo&&0===t.signInfo.length&&(l.type="0",utils.ajaxOpenAPI({type:"GET",url:"/uc/querySaleInfoCfg",success:function(t){t&&"200000"==t.resultCode&&(t.data?(opts.height=92,opts.onok=function(){s(),a(e),$(".ol_box_4.signAgreementLogs").hide(),$(".ol_box_mask").hide()},opts.oncancel=function(){c(),window.location.href=domainMain+"/account/logout",$(".ol_box_4.signAgreementLogs").hide(),$(".ol_box_mask").hide()}):(opts.height=130,d+='<div style="margin-top:16px;text-align:left;height:24px;line-height:24px;font-size: 12px;"><i class="isShowSaleInfoCfg" data-isShowSaleInfoCfgFlag="true"></i><span style="display:inline-block;">接收短信、邮件、系统通知发送的活动、优惠、中奖等消息。</span><a href="https://sale.vmall.com/notification.html" style="display:inline-block;color: #267eff;"  target="_blank">了解详情</a></div>',opts.onok=function(){s();var t=$(".ol_box_4.signAgreementLogs").find(".box-ok");t.attr("data-marketing",l.isShowSaleInfoCfgFlag),a(e);var n=l.isShowSaleInfoCfgFlag;"true"===n&&o(),$(".ol_box_4.signAgreementLogs").hide(),$(".ol_box_mask").hide()},opts.oncancel=function(){c();var t=$(".ol_box_4.signAgreementLogs").find(".box-cancel");t.attr("data-marketing",l.isShowSaleInfoCfgFlag),window.location.href=domainMain+"/account/logout",$(".ol_box_4.signAgreementLogs").hide(),$(".ol_box_mask").hide()}),new utils.box(d,opts).open(),$(".ol_box_4.signAgreementLogs").find(".box-close").remove())}}))}}})}function a(t){var e=new Date;e.setTime(e.getTime()+36e12);var o={portal:1,lang:"zh-CN",country:"CN",signInfo:t,tokenType:2};utils.ajaxOpenAPI({type:"POST",url:"/mcp/agreement/signAgreement",data:o,timeout:1e4,timeoutFunction:function(){Tool.cookie.set("hasSigned","1",{expires:e})},success:function(t){Tool.cookie.set("hasSigned","1",{expires:e})},errorFunction:function(t){Tool.cookie.set("hasSigned","1",{expires:e})}})}function s(){var t=$(".ol_box_4.signAgreementLogs").find(".box-ok");t.attr({"data-track":"true","data-type":l.type,"data-option":"agree"}).addClass("report_onok");var e=$(".ol_box_4.signAgreementLogs").find(".box-cancel");e.hasClass("report_oncancel")&&e.removeClass("report_oncancel")}function c(){var t=$(".ol_box_4.signAgreementLogs").find(".box-cancel");t.attr({"data-track":"true","data-type":l.type,"data-option":"disagree"}).addClass("report_oncancel");var e=$(".ol_box_4.signAgreementLogs").find(".box-ok");e.hasClass("report_onok")&&e.removeClass("report_onok")}"shopdcportal-dev.test.vmall.com"==window.location.host&&(window.openapiDomain="https://openapidev.test.vmall.com"),window.setCsrftoken=!1,function(t){var e=/Android|webOS|iPhone|iPod|BlackBerry/i.test(navigator.userAgent),o=t.location,n=[{pc:"sale.vmall.com",wap:"msale.vmall.com"},{pc:"mm.vmall.com",wap:"mt.vmall.com"},{pc:"www.hihonor.com",wap:"m.hihonor.com"},{pc:"shop.huawei.com",wap:"mshop.huawei.com"}];if(!e)return!1;for(var i=0;i<n.length;i++)if(o.hostname==n[i].pc){o.href=o.href.replace(n[i].pc,n[i].wap);break}}(window),window.main=window.domainMain,window.domainAms=window.amsDomain,window.ucDomain=window.domainUc,$.extend({browser:{}}),window.utils||(window.utils={}),window.Tool=window.utils,window.components||(window.components={}),window.console=window.console||function(){var t={};return t.log=t.warn=t.debug=t.info=t.error=t.time=t.dir=t.profile=t.clear=t.exception=t.trace=t.assert=function(){},t}(),utils.escape=function(t){if("string"!=typeof t)return t;if(Tool.isEmpty(t))return"";var e=document.createElement("div"),o=document.createTextNode(t);return e.appendChild(o),e.innerHTML},utils.getPublishTime=function(){if(window.pageConfig.publishTime){var t,e,o,n,i,a,s=new Date(window.pageConfig.publishTime),c=function(t){return(t<10?"0"+t:t).toString()};return t=s.getFullYear(),e=c(s.getMonth()+1),o=c(s.getDate()),n=c(s.getHours()),i=c(s.getMinutes()),a=c(s.getSeconds()),t+e+o+n+i+a}},utils.pkg=function(t,e,o){var n,i,a;if(3==arguments.length?(n=t,i=e,a=o):(n=window,i=t,a=e),!i||!i.length)return null;for(var s=i.split("."),c=n,l=0;l<s.length-1;l++)c[s[l]]||(c[s[l]]={}),c=c[s[l]];return c=c[s[s.length-1]]=a||c[s[s.length-1]]||{}},utils.getUrlParams=function(t){var e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)"),o=window.location.search.substr(1).match(e)||window.location.hash.substr(1).match(e);return o?decodeURIComponent(o[2]):""},utils.toast=function(t){t.message=t.message||"提示信息",t.delay=t.delay||2e3,t.icon=t.icon||"success";var e=$(".dc-toast");0==e.length?e=$('<div class="dc-toast dc-toast-'+t.icon+'">'+t.message+"</div>").appendTo($("body")):e.text(t.message),e.css({"margin-left":-(e.outerWidth()/2),"margin-top":-(e.outerHeight()/2)}),e.fadeIn("fast",function(){setTimeout(function(){e.fadeOut("slow")},t.delay)})},function(t,e){var o={};Tool.cookie={get:function(t){var e=null;if(document.cookie&&""!=document.cookie)for(var o=document.cookie.split(";"),n=0;n<o.length;n++){var i=(o[n]||"").replace(/^(\s|\u00A0)+|(\s|\u00A0)+$/g,"");if(i.substring(0,t.length+1)==t+"="){var a=function(t){t=t.replace(/\+/g," ");for(var e='()<>@,;:\\"/[]?={}',o=0;o<e.length;o++)if(t.indexOf(e.charAt(o))!=-1){t.startWith('"')&&(t=t.substring(1)),t.endWith('"')&&(t=t.substring(0,t.length-1));break}return decodeURIComponent(t)};e=a(i.substring(t.length+1));break}}return e},set:function(t,e,o){o=o||{},null===e&&(e="",o.expires=-1);var n="";if(o.expires&&("number"==typeof o.expires||o.expires.toUTCString)){var i;"number"==typeof o.expires?(i=new Date,
i.setTime(i.getTime()+24*o.expires*60*60*1e3)):i=o.expires,n="; expires="+i.toUTCString()}var a="; path="+(o.path||"/"),s=window.location.hostname.split("."),c=s.length,l="."+s[c-2]+"."+s[c-1],r="; domain="+l,p=o.secure?"; secure":"";document.cookie=[t,"=",encodeURIComponent(e),n,a,r,p].join("")}},Tool.exist=function(t){return!!e(t).length},Tool.pcBox=function(){var t='<div id="box_tip"><div class="shade"></div><div class="dialog" id="box"><div>';t+='<a title="关闭" class="box-close" href="javascript:;"></a>',t+='</div><div><div class="h"></div><div class="b"><p></p></div><div class="f">',t+='<a href="javascript:;" id="dialog-btn"></a></div></div></div></div>';var o=e("body").children().eq(0);e(t).insertBefore(o)},Tool.pcBox(),e(".box-close").on("click",function(){e("#box_tip").hide(),e("#box_tip .h").html(""),e("#register").remove(),e("#dialog-btn").removeAttr("class"),window.flashOpt&&dialPrize.loadFlash(1)});var n=window.locale.jumpBtn;e("#dialog-btn").on("click",function(){var t=e(this).html();e("#box_tip").hide(),e("#box_tip .h").html(""),e(this).removeAttr("class"),e.inArray(t,[n["btn.login"]])>=0?window.location.href=loginLink:e.inArray(t,[n["btn.verification"],n["btn.binding"],n["btn.binding2"]])>=0?window.location.href=main+"/member/bind/phone/redirect?back_url="+encodeURIComponent(window.location.href):e.inArray(t,[n["btn.authentication"],n["btn.authentication2"]])>=0?window.location.href=main+"/authmember/accesstoken":e.inArray(t,[n["btn.share"]])>=0?Tool.share.shareSina(Tool.share.shareType):e.inArray(t,[n["btn.earn"]])>=0?window.location.href=main+"/member/newpoint":e.inArray(t,[n["btn.data"]])>=0&&(window.location.href=infoLink),window.flashOpt&&dialPrize.loadFlash(1)}),Tool.pcTipShow=function(t,o,i,a,s){e("#box_tip").addClass(s),e("#box_tip .h").html(t),e("#box_tip .b p").html(o),e("#box_tip #dialog-btn").addClass(i).html(a),a==n["btn.login"]&&e("#register").length<1&&e("#box_tip #dialog-btn").before("<a href='"+registerLink+"' id='register' class='dialog-button-cancel'>"+n["btn.register"]+"</a>"),e("#box_tip").show();var c=e(window).height(),l=e(window).width(),r=e(".dialog").height(),p=e(".dialog").width(),d=(c-r)/2,h=(l-p)/2;e("#box_tip #box").css({left:h+"px",top:d+"px"}),e("#box_tip").css({opacity:1,filter:"alpha(opacity=100)"})},Tool.isFunction=function(t){return"[object Function]"===Object.prototype.toString.call(t)},Tool.isEmpty=function(t){return"undefined"==t||null==t||""==t||0==t.length},Tool.getJSON=function(t){if(this.isEmpty(t)||this.isEmpty(t.url)||!this.isFunction(t.callback))return!1;var o=t.domain+t.url+(new Date).getTime()+"&callback=?";e.getJSON(o,t.data,function(e){t.callback(e)})},e(t).on("resize",function(){e("#box").css({left:(e(t).width()-600)/2,top:(e(t).height()-290)/2})}),t.Md=o}(window,jQuery),utils.getCsrftoken=function(){$.ajax({type:"GET",url:window.openapiDomain+"/csrftoken.js",cache:!1,async:!1,timeout:5e3,dataType:"text",beforeSend:function(t){t.withCredentials=!0},xhrFields:{withCredentials:!0},success:function(t){var e=document.createElement("script");e.type="text/javascript",e.innerHTML=t,$("body").append(e)},error:function(){console.log("request error")}})},utils.getCsrftoken(),utils.ajaxOpenAPI=function(t){"POST"==t.type.toUpperCase()&&(t.data=JSON.stringify(t.data)),t.error=function(e,o){if(200917==e.responseJSON.resultCode&&"DESIGN"!=window.shopdcmode){utils.getCsrftoken();var n=new utils.box(window.locale.prize["prompt.wait"],{boxclass:"ol_box_4 tokenTip",showTitle:!1,showCancel:!1,onok:function(){n.close(),window.location.reload()}}).open();$(".tokenTip .box-close").on("click",function(){n.close(),window.location.reload()})}"timeout"===o&&"function"==typeof t.timeoutFunction?t.timeoutFunction():"function"==typeof t.errorFunction&&t.errorFunction()},t.url=window.openapiDomain+t.url,$.ajax($.extend({type:"POST",dataType:"json",url:"",cache:!1,data:{},timeout:5e3,beforeSend:function(t){if(t.withCredentials=!0,!setCsrftoken)try{t.setRequestHeader("CsrfToken",csrftoken)}catch(t){}},xhrFields:{withCredentials:!0},success:function(t){},error:function(t,e){}},t))},utils.goLogin=function(){window.location.href=window.loginLink},utils.upLogin=function(t){function e(){var t=document.getElementById("upAgentIframe"),e=location.origin+"/upCallback.htm";t?t.src=e+"?"+(new Date).getTime():(t=document.createElement("iframe"),t.id="upAgentIframe",t.src=e,t.style.display="none",document.body.appendChild(t))}var o="callback"+(new Date).getTime(),n=ifmLogin+"?validated=true&themeName=red&service="+encodeURIComponent(domainMain+"/account/caslogin?url="+encodeURIComponent(location.origin+"/upCallback.htm?callback="+o+"&prePage="+encodeURIComponent(encodeURIComponent(location.href))))+"&loginChannel=26000000&reqClientType=26&lang=zh-cn";name="up-iframe-"+(new Date).getTime(),html='<iframe class="boxIframe" width="100%" height="100%" frameborder="0" name="'+name+'" src="about:blank" scrolling="no"></iframe><script>setTimeout(function(){window["'+name+'"].location.href="'+n+'";} ,100);</script>';var i=new utils.box(html,{boxid:"ec_login",title:" ",remember:!1,width:500,height:600,showButton:!1,draggable:!0,onclose:function(t){try{delete window[o]}catch(t){window[o]=null}t.find("iframe").each(function(){this.contentWindow.close(),jQuery(this).remove()})}});e(),i.open(),window[o]=function(){i.close(),t&&t()}},utils.isLogin=function(){return utils.cookie.get("uid")},utils.goUrl=function(t){if(!t.url)return!1;if("undefined"==typeof whitelist)return!1;var e=t.type||0,o=function(t,e){t=t.toLowerCase();for(var o=0;o<e.length;o++){if(0==t.indexOf(e[o]+"/"))return[!0,t];if(0==t.indexOf(e[o])){if(!t[e[o].length])return[!0,t];if("?"==t[e[o].length]||"#"==t[e[o].length])return t=t.replace(t[e[o].length],"/"+t[e[o].length]),[!0,t];if(o==e.length-1)return!1}}return!1},n=o(t.url,whitelist);if(n[0])if(0==e){var i=t.win||window;i.location.href=n[1]}else if(1==e)if(t.parame){var a=t.name||"newwindow_"+(new Date).getTime();window.open(n[1],a,t.parame)}else window.open(n[1])},function(){window.pageConfig=window.pageConfig||{};var t=window.pageConfig.areaCode||"CN";Tool.cookie.set("_areacode",t),pageConfig.locale&&"${locale.language}-${locale.country}"!=pageConfig.locale||(pageConfig.locale="zh-CN");var e=pageConfig.locale.replace("-","_");if(e.indexOf("HONOR")!=-1||e.indexOf("HW")!=-1){var o=e.split("_")[1].substring(2);e=e.split(o)[0]}Tool.cookie.set("locale_MS",e)}(),utils.getLanguageKey=function(t,e){return t>1?e+"s":e},utils.getCurrZoneDate=function(){var t=new Date,e=t.getTime(),o=6e4*t.getTimezoneOffset(),n=e+o,i=n+36e5*window.timeZone;return new Date(i)};var l={type:"",isShowSaleInfoCfg:"",isShowSaleInfoCfgFlag:"true"};n(function(){i()}),$(document).on("click",".isShowSaleInfoCfg",function(){$(this).toggleClass("isShowSaleInfoCfg_false");var t=$(".ol_box_4.signAgreementLogs").find(".box-ok"),e=$(".ol_box_4.signAgreementLogs").find(".box-cancel");$(this).hasClass("isShowSaleInfoCfg_false")?(l.isShowSaleInfoCfgFlag="false",t.attr("data-marketing",l.isShowSaleInfoCfgFlag),e.attr("data-marketing",l.isShowSaleInfoCfgFlag)):(l.isShowSaleInfoCfgFlag="true",t.attr("data-marketing",l.isShowSaleInfoCfgFlag),e.attr("data-marketing",l.isShowSaleInfoCfgFlag))})},function(t,e){var o=Tool.cookie.get("access_token_wb"),o="",n=window.location.origin+window.location.pathname,i=utils.getUrlParams("code");"zh-CN"!=window.pageConfig.locale&&$(document).ready(function(){window.fbAsyncInit=function(){FB.init({appId:facebookAppId,xfbml:!0,version:"v2.4"}),FB.Canvas.setAutoGrow()},function(t,e,o){var n,i=t.getElementsByTagName(e)[0];t.getElementById(o)||(n=t.createElement(e),n.id=o,n.src="//connect.facebook.net/en_US/all.js",i.parentNode.insertBefore(n,i))}(document,"script","facebook-jssdk")}),Tool.getAuthorizeUrl=function(t){utils.ajaxOpenAPI({type:"POST",url:"/ams/weibo/authorize",data:{redirect_uri:t},success:function(t){t&&t.success&&(window.location.href=t.authorizeUri)}})},Tool.getAccessToken=function(){utils.ajaxOpenAPI({type:"POST",url:"/ams/weibo/access_token",data:{code:i},xhrFields:{withCredentials:!0},success:function(t){t&&t.success&&(o=t.token_info.accessToken)}})},i&&Tool.getAccessToken(),Tool.isAccessToken=function(t,e){utils.ajaxOpenAPI({type:"POST",url:"/ams/weibo/get_token_info",data:{access_token:o},success:function(o){o&&o.success&&("0"===o.scope_token_info.expires_in?Tool.getAuthorizeUrl(n):Tool.shareSina(t,e))}})},Tool.shareSina=function(t,e){utils.ajaxOpenAPI({type:"POST",url:"/ams/weibo/share",data:{access_token:o,status:t.shareMap.title+t.shareMap.content+t.shareMap.url,picUrl:t.shareMap.pic},xhrFields:{withCredentials:!0},success:function(o){o&&o.success&&(utils.toast({message:"分享成功！"}),Tool.share.addPrizeCount(t.activityCode),e&&e())}})},Tool.share={},Tool.share.shareSina=function(t,e){"CN"===window.pageConfig.areaCode?t.isTrueShare===!1?window.open("http://service.weibo.com/share/share.php?title="+encodeURIComponent(t.shareMap.title)+"&pic="+encodeURIComponent(t.shareMap.pic)+"&url="+encodeURIComponent(t.shareMap.url)+"&appkey=23431084"):o?Tool.isAccessToken(t,e):Tool.getAuthorizeUrl(n):FB.ui({method:"feed",link:t.shareMap.url||n,hashtag:t.shareMap.hashtag},function(o){o&&!o.error_code&&(Tool.share.addPrizeCount(t.activityCode),e&&e())})},Tool.share.addPrizeCount=function(t){var e=function(){return!0};utils.ajaxOpenAPI({type:"POST",url:"/ams/prize/share",data:{activityCode:t,t:(new Date).getTime()},success:e})}}]);